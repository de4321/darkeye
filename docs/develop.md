



# 文档工具的使用

mkdocs serve 启动然后点击链接

mkdocs build 构建

# 功能开发
什么时候完全脱离对数据库的直接操控就算成功

番号黑话生成分享📌,甚至黑图

情趣体位抽签工具📌这个感觉没有什么用，不会有人带个电脑上床做爱

## 📌拟物类作品的收藏场景

注重仪式感，注重收藏感，有封面就包装成拟物的实体，放在书架子上，然后鼠标划过时可以抽出，然后观看。

黑化的番号复制按钮📌比如说什么什么大楼，几号位置等等，不容易被检测出来。

## 添加女优界面
- [x] 输入中文名与日文名，加女优，然后去网站自动更新信息

## 🔴 手动添加/修改作品界面
### 使用场景
可能在逛某地方的时候突然看到一个片子的番号只是单纯的想记录
单独添加一个番号，后面手动补信息

### 功能
- [x] 输入番号，发布日期，一句话剧情的输入框
- [x] 过滤信息库匹配显示的导演输入框
- [x] 详细的输入框中日标题与介绍内容系统
- [ ] 旁边有爬虫按钮可实时去抓取📌 
- [x] 可筛选的女优选择器
- [x] 可筛选的男优选择器
- [ ] 添加侧双击女优可输入更多的信息，包括女优的态度的转变，职业，年轻程度 📌
- [x] 保存临时修改与加载临时修改
- [ ] 近期的修改记录显示，根据时间线去搜
- [x] 修改的加载与存储
- [x] 封面的加载，以及拖动保存图片到库内位置
- [x] 内容更改检测，更好的提示，规范化能否添加修改的行为。
- [x] Tag页面合并到此处，并且完成加载，修改，内容更改检测，临时存储，与临时加载功能。
- [ ] 动态的tagwidget页面
- [ ] 对比功能，比如同故事的作品对比，主要是筛选出同类型最好的片子
- [x] 谷歌翻译，可将日文翻译成中文。
- [x] 一键打开网站，利于手动复制资料
- [ ] 取消QTextEdit的文本格式

### 技术实现
QDialog 弹出界面
- [x] 可筛选的选择器 
- [ ] 图片数据库image_url完整性检查📌
.ini保存内部的记录

近期的修改记录显示主要是依靠库内的时间戳，还是应该是外面的手动记录10条到.ini内

## 🌱 tag筛选界面 
- [x] tag选进去，就把作品给筛选出来，包括封面等


## ⏳ 封面显示作品与信息滑动组件
- [ ] UI优化，包括字体大小变化，但是不需要什么响应式的布局了，因为这个屏幕不会缩小到非常的小的。
- [x] 左右按钮滑动图片与信息加载
- [x] 女优与标签的定宽度自动换行的Flowlayout实现
- [x] 女优可点击跳转到对应单个女优页
- [ ] tag可点击跳转到tag筛选界面

## ⏳ 封面查找按钮
- [ ] QLineEdit信息模糊匹配显示
- [ ] 搜索后判断到底查了什么东西并跳转，番号跳作品，女优跳女优，精准匹配直接跳转，否则转成多搜索页面

## 🔥 作品添加/修改tag功能

### 使用场景
一般是看完片后添加tag,一般信息网站的tag非常的不准，几乎没有任何的参考价值，也没有任何的筛选价值

### 功能
- [x] 选择作品 
- [x] tag左右移动的选择内容器，左边一容器，右边一个toolbox分类标签
- [x] 互斥标签的锁的实现
- [x] 修改的加载与存储
- [x] UI的更改，更加的日式，比如标签是竖向的，然而这个要更改flowlayout,
- [ ] 近期的修改记录显示,这个要改数据库
### 技术实现
从数据库加载tag
自定义flowlayout+toolbox 多分组选择，点击tag后移动，tag内附带数据

## 🟢 管理tag功能 
实际上更改tag的比例是非常的低的
长按进更改模式，所有标签都在抖动，拖动排序tag_type组，点击更改标签内容
- [x] 单个更改tag的标签内容
- [ ] 更改标签互斥组-选中一堆，然后更改成一组
- [x] 更改标签颜色
- [ ] 更改标签的tag_type组
- [ ] 添加新的tag_type组
- [x] tag_type组在toolbox显示前后问题
- [x] 批量更改标签的颜色，选中一堆，然后更改成一种颜色
- [ ] 同一个互斥组强制设置为同色
- [ ] 标签重映射问题，还剩下换主标签的功能
- [x] 取色表盘
- [ ] 合并标签的问题
tag模式，语素组成与标准化剧情

连锁tag

## 修改作品的tag功能 优先级中
- [ ] 选中作品然后加载对应的标签，然后和添加标签的界面就一样了

## 自动获得作品女优信息功能
[[data-collect]]

## 自慰记录的添加
一次撸管只记录一部片子
- [x] 番号搜索器，输入后匹配库作品
- [ ] 时间输入，额外预测自慰时间,这个没什么用，一般来说撸完添加
- [x] 评分系统1-5 爱心显示
- [x] 使用工具，工具库搜索不重复的
- [x] 事后评价框
- [x] 提交按钮
QDialog弹出
## 做爱记录的添加
- [x] 时间
- [x] 评分
- [x] 事后评价
- [x] 提交
## 晨勃记录的添加
这个有个问题，不及时的记录就会忘记，除非有东西一直的提醒你。至少晚上是想不起来早晨有没有晨勃的。
- [x] 时间
- [x] 事后评价


## 界面美化问题
加载界面的美化，需要日式的一种加载界面
各种东西需要美化，包括选择器等等

## 高分屏适配问题

响应式UI与动态布局

## 多言语切换

## 亮暗主题切换

## 字体设置
找一个比较好的自己弄上去


# 测试用例
根目录执行
pytest


公共数据
私密数据
可成为公共数据的个人数据，比如个人的打标签，这需要每个人来参与

各种页面的截图分享机制用快捷键C


控制clash RESTful API  达到爬虫可用的目的
https://clash.gitbook.io/doc/restful-api

软件开始时数据库检查，无数据库建立数据库，但是这个是后面的事情，如何启动软件


软件设计时焦点的细节考虑

- [x] 界面懒加载

- [ ] 绘图迁移，不要用matplotlab,使用QChart绘图，好像交互性更加的好

- [ ] 绘图，横轴近30天，纵轴是24小时，然后绘撸管点图

- [ ] 合并姓名链条的问题，有脏数据污染怎么处理，还是规定只能在链条下
主要随着时间的发展，女优会改名字，所以还要弄一个可视化可以拖动的的界面处理链条问题

- [ ] 推动UI与操作层分离，每个界面下面专门弄一个initUI的函数，当然UI内部如果要计算的就在内部，一行程度的封装下分离

- [ ] 增量备份图片的问题

- [ ] 双模型方案，数据库模型与UI有个问题，如何能在保留用户编辑的情况下，把新的数据同步进来。包括乐观锁与悲观锁的问题。
在同时修改同一个东西时，没有任何的机制能知道保留哪个，只能提示覆盖，放弃，或者手动合并

作品女优relation 额外内容未实现
作品的          增删改查          交互UI
tag的           增删查改          交互UI
女优与女优姓名   增删查改          交互UI
男优与男优姓名   增删查改          表视图

前缀表与公司表的 增删查改         表视图
单体服饰表       增删查改         表视图
做爱动作表       增删查改         表视图

喜欢的作品      增删查改          爱心+过滤作品
喜欢的女优      增删查改          爱心+过滤女优
自慰记录表      增删查改           表视图
做爱记录表      增删查改           表视图
晨勃记录表      增删查改           表视图

科普页面就是markdown渲染器+双链跳转功能+node点图

分层架构

包括模型类与仓库类，然后在UI层MVVM 专门为UI的模型
就目前来看直接sqllite读写就行了，不需要专门弄模型类与仓库类，等到表再多些，到20张表后弄成模型类，50张表后上ORM框架

# 市场分析

同类产品，开源的，还有各种AV网站，AV网站根本就不会停留，因为老是换，AV网站的盈利模式基本靠赌博广告。

刮削器https://github.com/Yuukiy/JavSP

女优头像https://github.com/gfriends/gfriends?tab=readme-ov-file

管理器https://github.com/4evergaeul/JAV_MovieManager
https://github.com/elonmusx/avbook?tab=readme-ov-file

就目前jithub上的项目最多的是刮削器，然后是管理器，但是刮削器有个问题，只搜，不整理，没有形成有用的数据，刮出来的东西对个人来说没有价值


最后一定要接上各类刮削器，也就是爬虫

- [x]javtext最受欢迎的女优添加
- [ ]复制作品的全部tag到另一部作品中去
- [x]分解标题，添加tag 比如标题中有内射，添加中出标题,用词组分解，就是分解token的东西分解
- [ ]tag的操作，包括分裂，合并，运算，条件运算，等等



现在的问题是如何处理片子之间的关系？主要是同一个企划的片子怎么分到一起，还有就是大致同样的故事，但是不同片商拍的也分到一起，这一点上missav做的很好

提纯管道



如何处理好这个收藏软件与AV网站的关系
AV网站作为一种热门与信息获取的来源，收藏软件作为一种永久性的，自由的，分享类的。所以需要快速的到达那些AV网站，也就是说爬虫策略与跳转策略需要外挂，可以快速的更新
作品与作品之间网状结构的可能性，用力导向图，要求力导向图可交互，包括拖动，放大缩小，调整吸力斥力的大小，然后点击可以跳转，

# 未来功能
插件化跳转
插件化爬虫，因为爬虫容易失效，这种事情一定要插件化，可供别人快速使用，包括插件化爬虫的开发问题。

与各种的刮削器对接，但是很多的刮削器非常的复杂，没有必要弄这么多的东西，简单的裁剪，刮削器就是刮来脏数据



包括作品，女演员，男演员，标签，导演

数据完整性问题，如何将不完整的信息给暴露出来，然后人工去修复

最高完整性，番号-导演-女演员-男演员-剧情-标题


如果不能上fanza通过第三方网站的爬虫的稳定性有很大的问题

最终的目的是寻找关系，比如这个片是谁演的，她还演过哪些，题材等等



